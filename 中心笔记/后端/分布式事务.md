## 模型

#### XA模型和AT模型

![[Pasted image 20250715134225.png]]

#### Saga 模型

概述

Saga 模型是一种基于事件驱动的分布式事务处理模型。它将一个长事务分解为多个短事务，每个短事务都有对应的补偿操作。

1. 执行流程
    

正向操作：

按顺序执行一系列短事务操作，每个操作都有对应的补偿操作。

如果所有操作都成功，则事务完成。

补偿操作：

如果某个操作失败，则按相反顺序执行补偿操作，撤销之前已完成的操作。

确保事务回滚到初始状态。

2. 优点
    

高可用性：Saga 模型通过事件驱动的方式，减少了资源锁定时间，提高了系统的可用性。

灵活性：Saga 模型允许在每个短事务中定义补偿操作，适用于复杂的业务场景。

3. 缺点
    

最终一致性：Saga 模型不能保证强一致性，只能保证最终一致性。

复杂性：Saga 模型的实现较为复杂，需要开发者编写每个短事务及其补偿操作的逻辑。

#### 总结

XA 模型：适用于需要强一致性的场景，但性能和可用性较差。

AT 模型：适用于性能要求较高且业务逻辑复杂的场景，但实现复杂。

Saga 模型：适用于高可用性和最终一致性的场景，但实现复杂且不能保证强一致性。